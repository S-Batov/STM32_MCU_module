<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.14.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MCU_Module: Core/Inc/ucc5870.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">MCU_Module
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.14.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('ucc5870_8h.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">ucc5870.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Header file for UCC5870 interface modules.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;stm32g4xx_hal.h&quot;</code><br />
<code>#include &quot;<a class="el" href="ucc5870__regs_8h_source.html">ucc5870_regs.h</a>&quot;</code><br />
</div>
<p><a href="ucc5870_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-define-members" class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aba247db5ad33aca33eb5f99e992a70a2" id="r_aba247db5ad33aca33eb5f99e992a70a2"><td class="memItemLeft" align="right" valign="top"><a id="aba247db5ad33aca33eb5f99e992a70a2" name="aba247db5ad33aca33eb5f99e992a70a2"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DRIVER_NUM</b>&#160;&#160;&#160;6</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-enum-members" class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a67d61b9a2e68989ce750eb79a1663d27" id="r_a67d61b9a2e68989ce750eb79a1663d27"><td class="memItemLeft" align="right" valign="top"><a id="a67d61b9a2e68989ce750eb79a1663d27" name="a67d61b9a2e68989ce750eb79a1663d27"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a67d61b9a2e68989ce750eb79a1663d27">UCC5870_Status_e</a> { <br />
&#160;&#160;<b>ALL_GOOD</b> = 0
, <b>INIT_FAULT</b> = 1
, <b>STATUS_FAULT</b> = 2
, <b>PRI_RDY_FAULT</b> = 3
, <br />
&#160;&#160;<b>SEC_RDY_FAULT</b> = 4
<br />
 }</td></tr>
<tr class="memdesc:a67d61b9a2e68989ce750eb79a1663d27"><td class="mdescLeft">&#160;</td><td class="mdescRight">UCC5870 status enumeration. <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4c71376b368f7f119d775bf86d52687c" id="r_a4c71376b368f7f119d775bf86d52687c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4c71376b368f7f119d775bf86d52687c">Init_UCC5870_Regs</a> (void)</td></tr>
<tr class="memdesc:a4c71376b368f7f119d775bf86d52687c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize local UCC5870 registers.  <br /></td></tr>
<tr class="memitem:a7be4fc28240ed34a2481bd2bc37bc5d3" id="r_a7be4fc28240ed34a2481bd2bc37bc5d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a67d61b9a2e68989ce750eb79a1663d27">UCC5870_Status_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7be4fc28240ed34a2481bd2bc37bc5d3">inverterDiagnostics</a> (void)</td></tr>
<tr class="memdesc:a7be4fc28240ed34a2481bd2bc37bc5d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run diagnostics for all gate driver ICs.  <br /></td></tr>
<tr class="memitem:a21b2cdf958ef84194362cd3a622de227" id="r_a21b2cdf958ef84194362cd3a622de227"><td class="memItemLeft" align="right" valign="top"><a class="el" href="#a67d61b9a2e68989ce750eb79a1663d27">UCC5870_Status_e</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a21b2cdf958ef84194362cd3a622de227">Init_UCC5870</a> (void)</td></tr>
<tr class="memdesc:a21b2cdf958ef84194362cd3a622de227"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize gate driver IC configuration registers and enable them.  <br /></td></tr>
<tr class="memitem:ac522ec720807bb4fd77fe306eb397f6a" id="r_ac522ec720807bb4fd77fe306eb397f6a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac522ec720807bb4fd77fe306eb397f6a">printInverterStatus</a> (void)</td></tr>
<tr class="memdesc:ac522ec720807bb4fd77fe306eb397f6a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Print values of status registers for all gate driver ICs.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header file for UCC5870 interface modules. </p>
<p>Defines the public functions needed to interact with the gate drivers such as writing to registers and reading from registers. Also defines functions to diagnose faults and transmit the gate driver status register data to UART. </p>
</div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a21b2cdf958ef84194362cd3a622de227" name="a21b2cdf958ef84194362cd3a622de227"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21b2cdf958ef84194362cd3a622de227">&#9670;&#160;</a></span>Init_UCC5870()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a67d61b9a2e68989ce750eb79a1663d27">UCC5870_Status_e</a> Init_UCC5870 </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize gate driver IC configuration registers and enable them. </p>
<p>Initializes the gate driver ICs by first assigning them unique addresses and enabling the ICs. The configuration data from the local UCC5870 registers is transmitted via SPI. Configuration data is then read back from the drivers in order to confirm the configuration was successful. Finally, the the ICs' STATUS registers are checked to ensure no faults are present.</p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="#a67d61b9a2e68989ce750eb79a1663d27" title="UCC5870 status enumeration.">UCC5870_Status_e</a><ul>
<li>ALL_GOOD if configuration of all ICs' was successful</li>
<li>INIT_FAULT if data read from the IC doesn't match the data written to it OR faults are present after initialization </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a4c71376b368f7f119d775bf86d52687c" name="a4c71376b368f7f119d775bf86d52687c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c71376b368f7f119d775bf86d52687c">&#9670;&#160;</a></span>Init_UCC5870_Regs()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Init_UCC5870_Regs </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize local UCC5870 registers. </p>
<p>Initialize data to local UCC5870 registers. This is done by initializing the configuration parameters of one UCC5870, which is then copied to all of the drivers.</p>
<dl class="section note"><dt>Note</dt><dd>This function only initializes the values of local registers, it should be followed by Init_UCC5870 for the configuration to be written to the actual gate driver ICs </dd></dl>

</div>
</div>
<a id="a7be4fc28240ed34a2481bd2bc37bc5d3" name="a7be4fc28240ed34a2481bd2bc37bc5d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7be4fc28240ed34a2481bd2bc37bc5d3">&#9670;&#160;</a></span>inverterDiagnostics()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="#a67d61b9a2e68989ce750eb79a1663d27">UCC5870_Status_e</a> inverterDiagnostics </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run diagnostics for all gate driver ICs. </p>
<p>Read status registers of all gate driver ICs and report if a fault was found.</p>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="#a67d61b9a2e68989ce750eb79a1663d27" title="UCC5870 status enumeration.">UCC5870_Status_e</a><ul>
<li>ALL_GOOD if no faults were found on any of the gate drivers</li>
<li>STATUS_FAULT if a fault was found on any of the gate drivers</li>
<li>PRI_RDY_FAULT if the primary read flag is not set</li>
<li>SEC_RDY_FAULT if the secondary ready flag is not set </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ac522ec720807bb4fd77fe306eb397f6a" name="ac522ec720807bb4fd77fe306eb397f6a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac522ec720807bb4fd77fe306eb397f6a">&#9670;&#160;</a></span>printInverterStatus()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void printInverterStatus </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Print values of status registers for all gate driver ICs. </p>
<p>Poll latest status register data from all gate driver ICs and transmit that data to UART1</p>
<dl class="section warning"><dt>Warning</dt><dd>This function is blocking; use it only when timing requirements allow it. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_c6310732a22f63c0c2fc5595561e68f1.html">Core</a></li><li class="navelem"><a href="dir_e2489e887f17afa3cbc07a4ec152cdd2.html">Inc</a></li><li class="navelem"><a href="ucc5870_8h.html">ucc5870.h</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.14.0 </li>
  </ul>
</div>
</body>
</html>
